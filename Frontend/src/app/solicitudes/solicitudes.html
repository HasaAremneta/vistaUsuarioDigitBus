<div class="solicitud-tarjeta">
  <!-- Columna izquierda: selección -->
  <div class="columna-izquierda">
    <h2>Trámite de <strong>solicitud</strong></h2>
    <p>
      Selecciona el tipo de beneficio que deseas <strong>solicitar</strong>
    </p>

    <select [(ngModel)]="tipoSeleccionado">
      <option value="">Ninguno</option>
      <option value="estudiante">Estudiantes</option>
      <option value="tercera">Personas de la tercera edad</option>
      <option value="discapacidad">Personas con discapacidad</option>
      <option value="general">General</option>
    </select>
  </div>

  <!-- Columna central: formulario -->
  <div class="columna-formulario" *ngIf="tipoSeleccionado">
    <h3>
      Solicitud para <span>{{ labelTipo }}</span>
    </h3>

    <!-- Archivos por tipo -->
    <ng-container *ngIf="tipoSeleccionado === 'discapacidad'">
      <label>Documento del DIF o institución médica:</label>
      <input
        #fileInput_discapacidad
        style="display: none;"
        type="file"
        accept=".jpg,.jpeg,.png,.pdf"
        (change)="onFileChange($event, 'comprobante')"
      />
      <button type="button" class="file-btn" (click)="fileInput_discapacidad.click()">
        Seleccionar archivo
      </button>
      <small>
        Credencial del DIF o constancia médica oficial que acredite la discapacidad.
      </small>
    </ng-container>

    <ng-container *ngIf="tipoSeleccionado === 'estudiante'">
      <label>Comprobante de estudios:</label>
      <input
        #fileInput_comprobante
        style="display: none;"
        type="file"
        accept=".jpg,.jpeg,.png,.pdf"
        (change)="onFileChange($event, 'comprobante')"
      />
      <button type="button" class="file-btn" (click)="fileInput_comprobante.click()">
        Seleccionar archivo
      </button>
      <small>
        Recibo de inscripción, colegiatura o constancia de estudios vigente.
      </small>
    </ng-container>

    <ng-container *ngIf="tipoSeleccionado === 'tercera'">
      <label>Comprobante de edad:</label>
      <input
        #fileInput_comprobante_edad
        style="display: none;"
        type="file"
        accept=".jpg,.jpeg,.png,.pdf"
        (change)="onFileChange($event, 'comprobante')"
      />
      <button type="button" class="file-btn" (click)="fileInput_comprobante_edad.click()">
        Seleccionar archivo
      </button>
      <small>Documento que acredite tener 60 años o más.</small>
    </ng-container>

    <!-- Tipo general: solo voucher -->
    <ng-container *ngIf="tipoSeleccionado === 'general'">
      <label>Voucher:</label>
      <input
        #fileInput_voucher
        style="display: none;"
        type="file"
        accept=".jpg,.jpeg,.png,.pdf"
        (change)="onFileChange($event, 'voucher')"
      />
      <button type="button" class="file-btn" (click)="fileInput_voucher.click()">
        Seleccionar archivo
      </button>
      <small>Sube el voucher de pago del Pagobus.</small>
    </ng-container>

    <!-- Identificación + foto cuando NO es general -->
    <ng-container *ngIf="tipoSeleccionado !== 'general'">
      <label>Identificación oficial</label>
      <input
        #fileInput_id
        style="display: none;"
        type="file"
        accept=".jpg,.jpeg,.png,.pdf"
        (change)="onFileChange($event, 'identificacion')"
      />
      <button type="button" class="file-btn" (click)="fileInput_id.click()">
        Seleccionar archivo
      </button>

      <label>Foto reciente (tipo pasaporte)</label>
      <input
        #fileInput_foto
        style="display: none;"
        type="file"
        accept=".jpg,.jpeg,.png"
        (change)="onFileChange($event, 'foto')"
      />
      <button type="button" class="file-btn" (click)="fileInput_foto.click()">
        Seleccionar archivo
      </button>
      <small>Formato JPG o PNG, máximo 2MB</small>
    </ng-container>

    <!-- Sucursal -->
    <label>Seleccione para entrega:</label>
    <select [(ngModel)]="sucursal">
      <option value="">Seleccione sucursal</option>
      <option *ngFor="let s of sucursales" [value]="s">{{ s }}</option>
    </select>

    <!-- LISTA DE DOCUMENTOS SELECCIONADOS -->
    <ul *ngIf="documentos.length" class="files-list">
      <li *ngFor="let d of documentos">
        <span class="dot"></span>
        {{ d.nombre }} <em>({{ d.tipo }})</em>
      </li>
    </ul>

    <button (click)="enviarSolicitud()" [disabled]="loading">
      {{ loading ? 'Enviando...' : 'Enviar solicitud' }}
    </button>
  </div>

  <!-- Columna derecha: imagen -->
  <div class="columna-derecha"></div>
</div>

<!-- Modal simple - FUERA DEL CONTENEDOR PRINCIPAL -->
<div class="custom-modal-overlay" *ngIf="showModal">
  <div class="custom-modal-content">
    <h4>{{ modalTitle }}</h4>
    <p>{{ modalMessage }}</p>
    <button (click)="closeCustomModal()">Cerrar</button>
  </div>
</div>